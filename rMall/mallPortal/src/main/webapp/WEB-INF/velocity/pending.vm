<script src="http://code.jquery.com/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-confirmation.js"></script>
<script src="js/bootbox.js"></script>
 <script>
	$(function () {
		$("[data-toggle='popover']").popover({
			html:true,
			title:'订单详情',
			trigger:'hover'});

		$("[data-toggle='confirm']").click(function(){
			var row = $(this).parents(".success").parent();
			var orderID = $(this).parents(".success").attr("orderID");
			bootbox.confirm("Are you sure?", function(result) {
				console.log("cancel order{id : " + orderID + ", userResponse : " + result + "}");
				if(true == result){
					$.post('cancel.do', {id : orderID}, function(data){
						if("SUCCESS" == data){
							row.remove();
						}
					});  
				}
			}); 
		});
	});
 </script>

<table class="table table-condensed">
	<thead>
		<tr>
			<th>订单编号</th>
			<th>下单日期</th>
			<th>操作</th>
			<th>产品</th>
			<th>数量</th>
		</tr>
	</thead>
#foreach( $order in ${page.dataList})
	<tbody>
	#foreach( $orderItem in ${order.details} )
		<tr class="success" orderID="${order.id}">
			#if( $velocityCount == 1 )
			<td rowspan="$!{order.details.size()}" data-container="body" data-toggle="popover" data-content="$orderHelper.format($order)">
				${order.id}
			</td>
			<td rowspan="$!{order.details.size()}">${order.createDate}</td>
			<td rowspan="$!{order.details.size()}">
				<button type="button" class="btn btn-small btn-danger" data-toggle="confirm">取消</button>
				<button type="button" class="btn btn-small ">派送</button>
			</td>
			#end
			<td>${orderItem.product.displayName}</td>
			<td>${orderItem.quantity}</td>
		</tr>
	#end
	</tbody>
#end
</table>

<div class="pagination">
	<ul>
		<li><a href="pendingFirst.do">|<<</a></li>
		<li><a href="pendingPages.do?pageNumber=${page.previousPage}"><</a></li>
		<li><a href="pendingPages.do?pageNumber=${page.nextPage}">></a></li>
		<li><a href="pendingPages.do?pageNumber=${page.totalPage}">>>|</a></li>
		<li><a href="#">第 ${page.currentPage}页 / 共 ${page.totalPage}页</a></li>
	</ul>
</div>

<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">加载模态框</button>  
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">  
  <div class="modal-dialog">  
    <div class="modal-content">  
      <div class="modal-header">  
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>  
        <h4 class="modal-title">Modal title</h4>  
      </div>  
      <div class="modal-body">
      </div>  
      <div class="modal-footer">  
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>  
        <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>  
      </div>  
    </div><!-- /.modal-content -->  
  </div><!-- /.modal-dialog -->  
</div><!-- /.modal --> 